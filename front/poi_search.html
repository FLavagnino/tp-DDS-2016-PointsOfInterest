<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title> TP DDS 2016 - UTN FRBA </title>
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
	</head>
	<body>
		<div id="logo" style="margin-bottom:10px; margin-top:10px;">
			<h1>POI Terminal</h1>
			<p><em> TP DDS 2016 - UTN FRBA </a></em></p>
		</div><hr />	
		<div id="header" style="display:none;">
			<div id="menu">
				<ul>
					<li id="menu-logout"><a id="logout-link">Log out</a></li>
					<li id="menu-search"><a id="search-link" class="first">Search</a></li>
					<li id="menu-historical" class="current_page_item"><a id="historical-link">Log</a></li>
					<li id="menu-action"><a id="action-link">Action</a></li>
				</ul>
			</div>
		</div>
		<div id="actions" style="display: none;width: 800px; margin: 0 auto; padding-bottom: 205px; padding-top: 50px">
			<div class="post">
				<h2 class="title"><a href="#">Gestor de acciones</a></h2>
				<div class="entry">
					User&nbsp;
					<select id="ddlUsers" style="width:150px; height:22px; padding-left:10px;" onchange="ddlUsersOnChange();">
					</select>
					&nbsp;&nbsp;Action&nbsp;
					<select id="ddlActions" style="width:250px; height:22px; padding-left:10px;">
						<option value="totFecha">Reporte: Totalizar por Fecha</option>
						<option value="totUser">Reporte: Totalizar por Usuario</option>
						<option value="log">Auditoria: Generar Log</option>
						<option value="mail">Auditoria: Enviar Mail</option>
						<option value="search">Aplicación: Search</option>
						<option value="historico">Aplicación: Historico</option>
						<option value="actions">Aplicación: Gestor de acciones</option>
					</select>
					<input type="button" value="Add" id="addAction" style="padding:1px 15px;">
					<div>
						<input type="button" value="Accept" id="actionAccept" style="padding:1px 15px;">
						<input type="button" value="Cancel" id="actionCancel" style="padding:1px 15px;">
						<div id="actionsError" style="color:red; font-weight:bold; visibility:hidden;">Error Default</div>
					</div>
				</div>
				<div id="actionsSearch">
					<table id="actionsTable" style="display:none;">
					</table>
				</div>
			</div>
		</div>
		<div id="login-box" style="width: 800px; margin: 0 auto; padding-bottom: 198px; padding-top:100px; text-align:center-left;">
			<div style="margin-bottom:5px;">User</div>
			<div>
				<input type="text" id="input-user" placeholder="Insert your user">
			</div>
			<div style="margin: 10px 0px 5px 0px;">Password</div>
			<div>
				<input type="text" id="input-pass" placeholder="Insert your password">
			</div>
			<div>
				<input type="button" value="Login" id="button-login" style="padding:2px 15px;" class="available-login">
			</div>
			<div id="loginError" style="color:red; font-weight:bold; visibility:hidden;">Error Default</div>
		</div>
		<div id="page" style="display: none;width: 800px; margin: 0 auto; padding-bottom: 50px; padding-top: 25px"><div class="inner_copy"></div>
			<div id="content">
				<div class="post">
					<h2 class="title"><a href="#">Search</a></h2>
					<div class="entry">
						<div style="font-size:20px;">Criterio de Búsqueda</div>
						<input type="button" value="Add" id="add" style="padding:1px 15px;">&nbsp;<input type="button" value="Search" id="search" class="available" style="padding:1px 15px;">
						<div id="searchError" style="color:red; font-weight:bold; visibility:hidden;">Error Default</div>
						<div class="input-search">
							<form onkeypress="return event.keyCode != 13;">
								<table id="inputTable" style="padding-top:10px; ">
									<tr>
										<td>
											<input type="text" class="inputKeyWord" style="width:92%" placeholder="Ingrese un criterio de búsqueda..">
										</td>
									</tr>
								</table>
							</form>
						</div>
						<div id="poisResult" style="padding-top:10px;"></div>
					</div>
				</div>
			</div>
			<div style="clear:both">&nbsp;</div>
		</div>
		<div id="historical-box" style="display: none;width: 800px; margin: 0 auto; padding-bottom: 145px; padding-top: 25px;">
			<div class="post">
				<h2 class="title"><a href="#">Historial de búsquedas realizadas</a></h2>
				<div class="entry">
					<div style="font-size:20px;">Criterio de Búsqueda</div>
					<div id="historicalError" style="color:red; font-weight:bold; visibility:hidden;">Error Default</div>
					<div style="margin-bottom:5px; padding-top: 10px;">User</div>
					<div>
						<input type="text" id="input-historical-user" placeholder="Insert user">
					</div>
					<div style="margin-bottom:5px; padding-top: 10px;">Date</div>
					<div>
						<input type="text" id="input-historical-date-from" placeholder="from (aaaa/mm/dd-hh:mm)">&nbsp;<input type="text" id="input-historical-date-to" placeholder="to (aaaa/mm/dd-hh:mm)">
					</div>
					<div >
						<input type="button" value="Search" id="button-historical-search" class="available-historical-search" style="padding:1px 15px;">
					</div>
				</div>
			</div>
			<div>
				<div id="historicalSearch"></div>
			</div>
		</div>
		<div id="footer">
			<div class="fleft">
				<p>Copyright TP 2016 DDS UTN - FRBA.</p>
			</div>
			<div class="fright">
				<p></p>
			</div>
			<div class="fcenter">
				<p>Design by: UTN FRBA - DDS 2016 </p>
			</div>
			<div class="fclear"></div>
		</div>
		<script id="poisResultTemplate" type="text/x-handlebars-template">
			<div style="font-size:20px;">Resultados</div>
			<table style="padding-top:10px; width: 100%;">
				<tr>
					<th>Nombre</th>
					<th>Direccion</th>
				</tr>
				{{#each pois}}
				<tr onclick="openDetail({{@index}})">
					<td>{{name}}</td>
					<td>{{address.street}} {{address.number}}, CP {{address.postal_code}}, {{address.neighborhood}}</td>
					<div class="poiDetail" style="display: none; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);" >
						<div style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 30%;">
							{{#if (isBusStopType type)}}
								<img src="images/busstop.png" style="width: 100px; height:100px; padding: 5px 0px 10px 0px;">
								<div><b>Nro. Linea: </b>{{bus_line}}</div>
							{{else if (isBankType type)}}
								<img src="images/bank.jpg" style="width: 100px; height:100px; padding: 5px 0px 10px 0px;">
								<div><b>Dirección: </b>{{address.street}} {{address.number}}, CP {{address.postal_code}}, {{address.neighborhood}}</div>
								<div><b>Zona: </b>{{zone}}</div>
								<div><b>Servicios: </b>{{services}}</div>	
							{{else if (isCGPType type)}}
								<img src="images/cgp.png" style="width: 100px; height:100px; padding: 5px 0px 10px 0px;">
								<div><b>Dirección: </b>{{address.street}} {{address.number}}, CP {{address.postal_code}}, {{address.neighborhood}}</div>
								<div><b>Zona: </b>{{zone}}</div>
								<div><b>Servicios: </b>{{services}}</div>								
								{{#each opening_hours}}
								<div>{{service}} - {{dayOfWeekString day_of_week}}, de {{formatTime hours_from minutes_from}} - a: {{formatTime hours_to minutes_to}}</div>
								{{/each}}
							{{else if (isShopType type)}}
								<img src="images/shop.png" style="width: 100px; height:100px; padding: 5px 0px 10px 0px;">
								<div><b>Dirección: </b>{{address.street}} {{address.number}}, CP {{address.postal_code}}, {{address.neighborhood}}</div>
								<div><b>Nombre comercial o de fantasía: </b>{{name}}</div>
								<div><b>Rubro: </b>{{category}}</div>
							{{/if}}
						</div>
					</div>
				</tr>
				{{/each}}
			</table>
		</script>
		<script id="historicalSearchTemplate" type="text/x-handlebars-template">
			<div style="font-size:20px;">Resultados</div>
			<table>
				<tr>
					<th>Fecha</th>
					<th>Usuario</th>
					<th>Parametros</th>
					<th>POIs</th>
				</tr>
				{{#each historical_search}}
				<tr onclick="openHistoricalDetail({{@index}})">
					<td>{{date}}</td>
					<td>{{user_name}}</td>
					<td>{{filter}}</td>
					<td>{{results_number}}</td>
					<div class="historicalDetail" style="display: none; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);" >
						<div style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 30%;">
							<div><b>POIs encontrados:</b></div>
						{{#each results_name}}
							<div>{{this}}</div>
						{{/each}}
						</div>
					</div>
				</tr>
				{{/each}}
			</table>
		</script>
		<script id="actionsList" type="text/x-handlebars-template">
			<div>Resultados acciones</div>
			<table>
				<tr>
					<th>Nombre accion uno</th>
					<th>Nombre accion dos</th>
					<th>Nombre accion tres</th>
					<th>Nombre accion cuatro</th>
				</tr>
			</table>
		</script>

		<script src="js/jquery-3.1.1.min.js"></script>
		<script src="js/handlebars-v4.0.5.js"></script>
		<script src="js/poi_search.js"></script>

		<script type="text/javascript">
			$(function(){
				// Clona la fila oculta que tiene los campos base, y la agrega al final de la tabla
				$("#agregar").on('click', function(){
					$("#tabla tbody tr:eq(0)").clone().removeClass('fila-base').appendTo("#tabla tbody");
				});
			 
				// Evento que selecciona la fila y la elimina 
				$(document).on("click",".eliminar",function(){
					var parent = $(this).parents().get(0);
					$(parent).remove();
				});
			});
		</script>
	</body>
</html>
